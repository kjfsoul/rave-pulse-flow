---
description: Mandatory Beads (bd) issue tracking integration for all agent work
globs: ["**/*"]
alwaysApply: true
---

# Beads Issue Tracking Integration

## ðŸš¨ MANDATORY PROTOCOL

All agents MUST use Beads (`bd`) for task and issue management. This replaces markdown files, TODOs, and in-context planning.

## Session Startup (REQUIRED)

**Before ANY work, the agent MUST:**

1. Query ready work: `bd ready --json`
2. Review project health: `bd stats`
3. Check blocked issues: `bd blocked --json`
4. Select work from ready issues (never start blocked work)

## Workflow Rules

### Starting Work

**When beginning ANY task:**

1. **If work comes from Beads**:
   - Update status: `bd update <id> --status in_progress --json`
   - Use `bd show <id> --json` to get full context

2. **If work is NEW**:
   - Create issue first: `bd create "Task title" -d "Description" -p 1 -t task --json`
   - Then update status: `bd update <id> --status in_progress --json`

### During Development

**As you work, you MUST:**

- **File issues for discovered problems**:
  ```bash
  NEW_ISSUE=$(bd create "Bug: <description>" -t bug -p 0 --json)
  bd dep add <new-id> <parent-id> --type discovered-from
  ```

- **Add labels for organization**:
  ```bash
  bd label add <id> backend,urgent
  ```

### Completing Work

**When finishing ANY task:**

1. **Close with reason**:
   ```bash
   bd close <id> --reason "Completed: details" --json
   ```

2. **Check if dependencies are resolved**:
   ```bash
   bd ready --json
   ```

## Critical Rules

- âœ… **ALWAYS use `--json` flag** - Required for programmatic access
- âœ… **File issues instead of storing plans in context** - Solves amnesia problem
- âœ… **Automatically file issues** for problems noticed during work
- âœ… **Link discovered work** back to parent issues with `discovered-from`
- âœ… **Never start blocked work** - Always check `bd ready --json` first
- âœ… **Update status immediately** when starting/stopping work
- âœ… **Close with detailed reasons** - Include what was accomplished and how it was verified
